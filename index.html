<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<title>Price Tracker</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
body { font-family: Arial; padding: 20px; background: #F5F4F4; }
input { width: 100%; padding: 12px; margin-bottom: 10px; border-radius: 10px; }
button { width: 100%; padding: 12px; background: #cc163f; color: white; border: none; border-radius: 10px; cursor: pointer; }
button:hover { background: #a01533; }
#alert { margin-top: 10px; }
</style>
</head>
<body>

<input id="url" placeholder="Вставьте ссылку на товар">
<button id="addBtn">Добавить товар</button>
<div id="alert"></div>

<script>
const tg = window.Telegram.WebApp;
tg.expand();

const input = document.getElementById("url");
const addBtn = document.getElementById("addBtn");
const alertBox = document.getElementById("alert");

addBtn.addEventListener("click", async () => {
    const url = input.value.trim();
    if(!url){ alertBox.textContent = "⚠ Вставьте ссылку!"; return; }

    try {
        const res = await fetch("http://192.168.0.10:8000/add", { // <- здесь твой локальный IP
            method: "POST",
            headers: {"Content-Type": "application/json"},
            body: JSON.stringify({url: url, chat_id: tg.initDataUnsafe.user.id})
        });
        const data = await res.json();
        if(data.status === "ok") alertBox.textContent = "✅ Ссылка отправлена!";
        else alertBox.textContent = "⚠ Ошибка сервера";
    } catch(e) {
        console.error(e);
        alertBox.textContent = "⚠ Не удалось отправить данные";
    }
});
</script>

</body>
</html>
