<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<title>Price Tracker</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
body {
    margin: 0;
    padding: 0;
    font-family: "Helvetica Neue", Helvetica, Arial, sans-serif;
    background-color: #F5F4F4;
    color: #222;
    display: flex;
    flex-direction: column;
    align-items: center;
    min-height: 100vh;
    padding-top: 20px;
}

/* –ó–∞–≥–æ–ª–æ–≤–æ–∫ */
h1 {
    font-size: 28px;
    font-weight: 700;
    color: #cc163f;
    text-align: center;
    margin-bottom: 30px;
}

/* –§–æ—Ä–º–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è —Ç–æ–≤–∞—Ä–∞ */
.form-container {
    width: 90%;
    max-width: 500px;
    display: flex;
    flex-direction: column;
    gap: 10px;
    margin-bottom: 30px;
}

input[type="text"] {
    padding: 14px 16px;
    font-size: 16px;
    border: 2px solid #ccc;
    border-radius: 12px;
    outline: none;
    transition: border 0.2s;
}

input[type="text"]:focus {
    border-color: #cc163f;
}

button.add-btn {
    padding: 16px;
    font-size: 18px;
    font-weight: 600;
    border: none;
    border-radius: 14px;
    background-color: #cc163f;
    color: #fff;
    cursor: pointer;
    transition: background-color 0.2s, transform 0.1s;
}

button.add-btn:hover {
    background-color: #a01533;
    transform: translateY(-2px);
}

button.add-btn:active {
    transform: translateY(1px);
}

/* –°–ø–∏—Å–æ–∫ —Ç–æ–≤–∞—Ä–æ–≤ */
.product-list {
    width: 90%;
    max-width: 500px;
    display: flex;
    flex-direction: column;
    gap: 12px;
}

.product-item {
    display: flex;
    justify-content: space-between;
    align-items: center;
    background-color: #fff;
    padding: 12px 16px;
    border-radius: 12px;
    box-shadow: 0 2px 5px rgba(0,0,0,0.08);
    font-size: 16px;
}

.product-item span.url {
    flex: 1;
    margin-right: 10px;
    overflow-x: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
}

button.delete-btn {
    background-color: #888;
    color: #fff;
    border: none;
    border-radius: 10px;
    padding: 6px 12px;
    cursor: pointer;
    transition: background-color 0.2s;
}

button.delete-btn:hover {
    background-color: #555;
}

/* –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ */
.alert {
    font-size: 16px;
    color: #222;
    margin-bottom: 20px;
    text-align: center;
}
</style>
</head>
<body>

<h1>üìâ –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ —Ü–µ–Ω—ã</h1>

<div class="form-container">
    <input id="url" type="text" placeholder="–í—Å—Ç–∞–≤—å—Ç–µ —Å—Å—ã–ª–∫—É –Ω–∞ —Ç–æ–≤–∞—Ä">
    <button id="addBtn" class="add-btn">–î–æ–±–∞–≤–∏—Ç—å —Ç–æ–≤–∞—Ä</button>
</div>

<div class="alert" id="alert"></div>

<div class="product-list" id="productList"></div>

<script>
const tg = window.Telegram.WebApp;
tg.expand();

const input = document.getElementById("url");
const addBtn = document.getElementById("addBtn");
const alertBox = document.getElementById("alert");
const productList = document.getElementById("productList");

// –°–ø–∏—Å–æ–∫ —Ç–æ–≤–∞—Ä–æ–≤ –≤ –ø–∞–º—è—Ç–∏ (–±—É–¥–µ—Ç —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω —Å –±–æ—Ç–æ–º)
let products = [];

// –§—É–Ω–∫—Ü–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å–ø–∏—Å–∫–∞ –Ω–∞ —ç–∫—Ä–∞–Ω–µ
function renderProducts() {
    productList.innerHTML = "";
    products.forEach((p, index) => {
        const div = document.createElement("div");
        div.className = "product-item";
        div.innerHTML = `
            <span class="url">${p}</span>
            <button class="delete-btn" data-index="${index}">–£–¥–∞–ª–∏—Ç—å</button>
        `;
        productList.appendChild(div);
    });

    // –ü–æ–¥–∫–ª—é—á–∞–µ–º —É–¥–∞–ª–µ–Ω–∏–µ
    document.querySelectorAll(".delete-btn").forEach(btn => {
        btn.addEventListener("click", () => {
            const i = btn.getAttribute("data-index");
            const removed = products.splice(i, 1)[0];
            renderProducts();
            // –°–æ–æ–±—â–∞–µ–º –±–æ—Ç—É, —á—Ç–æ —Ç–æ–≤–∞—Ä —É–¥–∞–ª—ë–Ω (–æ—Ç–ø—Ä–∞–≤–ª—è–µ–º —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–π —Ç–µ–∫—Å—Ç)
            tg.sendData("DELETE:" + removed);
        });
    });
}

// –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞
addBtn.addEventListener("click", () => {
    const url = input.value.trim();
    if(url === ""){
        alertBox.textContent = "‚ö† –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤—Å—Ç–∞–≤—å—Ç–µ —Å—Å—ã–ª–∫—É!";
        return;
    }
    products.push(url);
    renderProducts();
    tg.sendData(url); // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –±–æ—Ç—É —Å—Å—ã–ª–∫—É
    alertBox.textContent = "‚úÖ –¢–æ–≤–∞—Ä –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω –±–æ—Ç—É!";
    input.value = "";
    setTimeout(() => alertBox.textContent = "", 3000);
});
</script>

</body>
</html>
